<%- include("partials/header.ejs") %>
<div class="flexcont">
    <div class="container">
        <div class="btn" id="btn0" >
            <button></button>
        </div>
        <div class="btn" id="btn1" >
            <button></button>
        </div>
        <div class="btn" id="btn2" >
            <button></button>
        </div>
        <div class="btn" id="btn3" >
            <button></button>
        </div>
        <div class="btn" id="btn4" >
            <button></button>
        </div>
        <div class="btn" id="btn5">
            <button></button>
        </div>
        <div class="btn" id="btn6" >
            <button></button>
        </div>
        <div class="btn" id="btn7" >
            <button></button>
        </div>
        <div class="btn" id="btn8" >
            <button></button>
        </div>
    </div>
</div>
<script>
     let flag = 0;
const buttons = document.querySelectorAll(".btn button");
const head= document.querySelector("h1")

buttons.forEach((button) => {
    button.addEventListener("click", () => {
       
        if (flag === 0) {
            button.innerHTML = "x"
            button.disabled = true
            flag = 1
        } else {
            button.innerHTML = "0"
            button.disabled = true
            flag = 0;
        }
        validation()  
    })
    
})

function validation() {
   const winPatterns=[ 
    [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
    [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
    [0, 4, 8], [2, 4, 6] // Diagonals]
]
for(let pattern of winPatterns){
    let[a,b,c]=pattern
    if((buttons[a].innerHTML=="x"&&buttons[b].innerHTML=="x"&&buttons[c].innerHTML=="x")||(buttons[a].innerHTML=="0"&&buttons[b].innerHTML=="0"&&buttons[c].innerHTML=="0")){
        if(buttons[a].innerHTML=="x"){
         
            buttons[a].style.color="red"
            buttons[b].style.color="red"
            buttons[c].style.color="red"
            head.innerHTML="X player wins"
            buttons.forEach((button) => {
    button.disabled = true;
});
        }
        else{
            buttons[a].style.color="rgb(50, 247, 50)"
            buttons[b].style.color="rgb(50, 247, 50)"
            buttons[c].style.color="rgb(50, 247, 50)"
            head.innerHTML="0 player wins"

            buttons.forEach((button) => {
    button.disabled = true;
});
        }
    }
}
}


</script>
    <%- include("partials/footer.ejs") %>